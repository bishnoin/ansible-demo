- name: Download application code
  get_url:
    url=https://wordpress.org/latest.tar.gz
    dest=/tmp/wp.tar.gz
    force=yes

- name: Extract file
  unarchive:
    src=/tmp/wp.tar.gz
    dest=/tmp/
    copy=no

- name: Delete existing document root directory
  file:
    path: /var/www/html
    state: absent

- name: Move application code into document root directory
  command: mv /tmp/wordpress /var/www/html

- name: Update wp-config file
  template:
    src=wp-config.php.j2
    dest=/var/www/html/wp-config.php
  notify:
    - Restart apache
